(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2166],{874:function(e,t,n){"use strict";var r=n(16935),i={"text/plain":"Text","text/html":"Url",default:"Text"};e.exports=function(e,t){var n,o,s,a,l,c,u,f,h=!1;t||(t={}),s=t.debug||!1;try{if(l=r(),c=document.createRange(),u=document.getSelection(),(f=document.createElement("span")).textContent=e,f.ariaHidden="true",f.style.all="unset",f.style.position="fixed",f.style.top=0,f.style.clip="rect(0, 0, 0, 0)",f.style.whiteSpace="pre",f.style.webkitUserSelect="text",f.style.MozUserSelect="text",f.style.msUserSelect="text",f.style.userSelect="text",f.addEventListener("copy",function(n){if(n.stopPropagation(),t.format){if(n.preventDefault(),void 0===n.clipboardData){s&&console.warn("unable to use e.clipboardData"),s&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var r=i[t.format]||i.default;window.clipboardData.setData(r,e)}else n.clipboardData.clearData(),n.clipboardData.setData(t.format,e)}t.onCopy&&(n.preventDefault(),t.onCopy(n.clipboardData))}),document.body.appendChild(f),c.selectNodeContents(f),u.addRange(c),!document.execCommand("copy"))throw Error("copy command was unsuccessful");h=!0}catch(r){s&&console.error("unable to copy using execCommand: ",r),s&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),h=!0}catch(r){s&&console.error("unable to copy using clipboardData: ",r),s&&console.error("falling back to prompt"),n="message"in t?t.message:"Copy to clipboard: #{key}, Enter",o=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C",a=n.replace(/#{\s*key\s*}/g,o),window.prompt(a,e)}}finally{u&&("function"==typeof u.removeRange?u.removeRange(c):u.removeAllRanges()),f&&document.body.removeChild(f),l()}return h}},97144:function(e){var t;t=function(){function e(t,n,r){return this.id=++e.highestId,this.name=t,this.symbols=n,this.postprocess=r,this}function t(e,t,n,r){this.rule=e,this.dot=t,this.reference=n,this.data=[],this.wantedBy=r,this.isComplete=this.dot===e.symbols.length}function n(e,t){this.grammar=e,this.index=t,this.states=[],this.wants={},this.scannable=[],this.completed={}}function r(e,t){this.rules=e,this.start=t||this.rules[0].name;var n=this.byName={};this.rules.forEach(function(e){n.hasOwnProperty(e.name)||(n[e.name]=[]),n[e.name].push(e)})}function i(){this.reset("")}function o(e,t,o){if(e instanceof r)var s=e,o=t;else var s=r.fromCompiled(e,t);for(var a in this.grammar=s,this.options={keepHistory:!1,lexer:s.lexer||new i},o||{})this.options[a]=o[a];this.lexer=this.options.lexer,this.lexerState=void 0;var l=new n(s,0);this.table=[l],l.wants[s.start]=[],l.predict(s.start),l.process(),this.current=0}function s(e){var t=typeof e;if("string"===t)return e;if("object"===t){if(e.literal)return JSON.stringify(e.literal);if(e instanceof RegExp)return e.toString();if(e.type)return"%"+e.type;if(e.test)return"<"+String(e.test)+">";else throw Error("Unknown symbol type: "+e)}}return e.highestId=0,e.prototype.toString=function(e){var t=void 0===e?this.symbols.map(s).join(" "):this.symbols.slice(0,e).map(s).join(" ")+" ● "+this.symbols.slice(e).map(s).join(" ");return this.name+" → "+t},t.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},t.prototype.nextState=function(e){var n=new t(this.rule,this.dot+1,this.reference,this.wantedBy);return n.left=this,n.right=e,n.isComplete&&(n.data=n.build(),n.right=void 0),n},t.prototype.build=function(){var e=[],t=this;do e.push(t.right.data),t=t.left;while(t.left);return e.reverse(),e},t.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))},n.prototype.process=function(e){for(var t=this.states,n=this.wants,r=this.completed,i=0;i<t.length;i++){var s=t[i];if(s.isComplete){if(s.finish(),s.data!==o.fail){for(var a=s.wantedBy,l=a.length;l--;){var c=a[l];this.complete(c,s)}if(s.reference===this.index){var u=s.rule.name;(this.completed[u]=this.completed[u]||[]).push(s)}}}else{var u=s.rule.symbols[s.dot];if("string"!=typeof u){this.scannable.push(s);continue}if(n[u]){if(n[u].push(s),r.hasOwnProperty(u))for(var f=r[u],l=0;l<f.length;l++){var h=f[l];this.complete(s,h)}}else n[u]=[s],this.predict(u)}}},n.prototype.predict=function(e){for(var n=this.grammar.byName[e]||[],r=0;r<n.length;r++){var i=n[r],o=this.wants[e],s=new t(i,0,this.index,o);this.states.push(s)}},n.prototype.complete=function(e,t){var n=e.nextState(t);this.states.push(n)},r.fromCompiled=function(t,n){var i=t.Lexer;t.ParserStart&&(n=t.ParserStart,t=t.ParserRules);var t=t.map(function(t){return new e(t.name,t.symbols,t.postprocess)}),o=new r(t,n);return o.lexer=i,o},i.prototype.reset=function(e,t){this.buffer=e,this.index=0,this.line=t?t.line:1,this.lastLineBreak=t?-t.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var e=this.buffer[this.index++];return"\n"===e&&(this.line+=1,this.lastLineBreak=this.index),{value:e}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(e,t){var n=this.buffer;if("string"!=typeof n)return t+" at index "+(this.index-1);var r=n.split("\n").slice(Math.max(0,this.line-5),this.line),i=n.indexOf("\n",this.index);-1===i&&(i=n.length);var o=this.index-this.lastLineBreak,s=String(this.line).length;return t+(" at line "+this.line+" col "+o+":\n\n"+r.map(function(e,t){return a(this.line-r.length+t+1,s)+" "+e},this).join("\n")+"\n"+a("",s+o))+"^\n";function a(e,t){var n=String(e);return Array(t-n.length+1).join(" ")+n}},o.fail={},o.prototype.feed=function(e){var t,r=this.lexer;for(r.reset(e,this.lexerState);;){try{if(!(t=r.next()))break}catch(e){var o=new n(this.grammar,this.current+1);this.table.push(o);var s=Error(this.reportLexerError(e));throw s.offset=this.current,s.token=e.token,s}var a=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var l=this.current+1,o=new n(this.grammar,l);this.table.push(o);for(var c=void 0!==t.text?t.text:t.value,u=r.constructor===i?t.value:t,f=a.scannable,h=f.length;h--;){var d=f[h],p=d.rule.symbols[d.dot];if(p.test?p.test(u):p.type?p.type===t.type:p.literal===c){var y=d.nextState({data:u,token:t,isToken:!0,reference:l-1});o.states.push(y)}}if(o.process(),0===o.states.length){var s=Error(this.reportError(t));throw s.offset=this.current,s.token=t,s}this.options.keepHistory&&(a.lexerState=r.save()),this.current++}return a&&(this.lexerState=r.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(e){var t,n,r=e.token;return r?(t="input "+JSON.stringify(r.text[0])+" (lexer error)",n=this.lexer.formatError(r,"Syntax error")):(t="input (lexer error)",n=e.message),this.reportErrorCommon(n,t)},o.prototype.reportError=function(e){var t=(e.type?e.type+" token: ":"")+JSON.stringify(void 0!==e.value?e.value:e),n=this.lexer.formatError(e,"Syntax error");return this.reportErrorCommon(n,t)},o.prototype.reportErrorCommon=function(e,t){var n=[];n.push(e);var r=this.table.length-2,i=this.table[r],o=i.states.filter(function(e){var t=e.rule.symbols[e.dot];return t&&"string"!=typeof t});return 0===o.length?(n.push("Unexpected "+t+". I did not expect any more input. Here is the state of my parse table:\n"),this.displayStateStack(i.states,n)):(n.push("Unexpected "+t+". Instead, I was expecting to see one of the following:\n"),o.map(function(e){return this.buildFirstStateStack(e,[])||[e]},this).forEach(function(e){var t=e[0],r=t.rule.symbols[t.dot],i=this.getSymbolDisplay(r);n.push("A "+i+" based on:"),this.displayStateStack(e,n)},this)),n.push(""),n.join("\n")},o.prototype.displayStateStack=function(e,t){for(var n,r=0,i=0;i<e.length;i++){var o=e[i],s=o.rule.toString(o.dot);s===n?r++:(r>0&&t.push("    ^ "+r+" more lines identical to this"),r=0,t.push("    "+s)),n=s}},o.prototype.getSymbolDisplay=function(e){return function(e){var t=typeof e;if("string"===t)return e;if("object"===t){if(e.literal)return JSON.stringify(e.literal);if(e instanceof RegExp)return"character matching "+e;if(e.type)return e.type+" token";if(e.test)return"token matching "+String(e.test);else throw Error("Unknown symbol type: "+e)}}(e)},o.prototype.buildFirstStateStack=function(e,t){if(-1!==t.indexOf(e))return null;if(0===e.wantedBy.length)return[e];var n=e.wantedBy[0],r=[e].concat(t),i=this.buildFirstStateStack(n,r);return null===i?null:[e].concat(i)},o.prototype.save=function(){var e=this.table[this.current];return e.lexerState=this.lexerState,e},o.prototype.restore=function(e){var t=e.index;this.current=t,this.table[t]=e,this.table.splice(t+1),this.lexerState=e.lexerState,this.results=this.finish()},o.prototype.rewind=function(e){if(!this.options.keepHistory)throw Error("set option `keepHistory` to enable rewinding");this.restore(this.table[e])},o.prototype.finish=function(){var e=[],t=this.grammar.start;return this.table[this.table.length-1].states.forEach(function(n){n.rule.name===t&&n.dot===n.rule.symbols.length&&0===n.reference&&n.data!==o.fail&&e.push(n)}),e.map(function(e){return e.data})},{Parser:o,Grammar:r,Rule:e}},e.exports?e.exports=t():this.nearley=t()},70802:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/code/sql-editor",function(){return n(43504)}])},10242:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(91010),i=n(50959),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},s=n(10309),a=i.forwardRef(function(e,t){return i.createElement(s.Z,(0,r.Z)({},e,{ref:t,icon:o}))})},55442:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(91010),i=n(50959),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M848 359.3H627.7L825.8 109c4.1-5.3.4-13-6.3-13H436c-2.8 0-5.5 1.5-6.9 4L170 547.5c-3.1 5.3.7 12 6.9 12h174.4l-89.4 357.6c-1.9 7.8 7.5 13.3 13.3 7.7L853.5 373c5.2-4.9 1.7-13.7-5.5-13.7zM378.2 732.5l60.3-241H281.1l189.6-327.4h224.6L487 427.4h211L378.2 732.5z"}}]},name:"thunderbolt",theme:"outlined"},s=n(10309),a=i.forwardRef(function(e,t){return i.createElement(s.Z,(0,r.Z)({},e,{ref:t,icon:o}))})},37043:function(e,t,n){"use strict";var r=n(82856),i=n(874),o=n.n(i),s=n(50959);class a extends s.Component{render(){let{children:e,tag:t}=this.props;return s.createElement(t,{onClick:this.onClick},e)}constructor(...e){super(...e),this.onClick=e=>{let{children:t,text:n,onSuccess:r,options:i}=this.props,a=s.Children.only(t),l="function"==typeof n?n():n,c=o()(l,i);r&&r(l,c),(null==a?void 0:a.props)&&"function"==typeof a.props.onClick&&a.props.onClick(e)}}}a.defaultProps={tag:"span",text:"",onSuccess(){r.ZP.success("已将内容复制到剪贴板")},options:{}},t.Z=Object.assign(a,{copy:o()})},43504:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return P}});var r=n(11527),i=n(55442),o=n(10242),s=n(94591),a=n(12013),l=n(82856),c=n(71889),u=n.n(c),f=n(50959);function h(){return(h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var d=["shift","alt","meta","mod","ctrl"],p={esc:"escape",return:"enter",".":"period",",":"comma","-":"slash"," ":"space","`":"backquote","#":"backslash","+":"bracketright",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta",OSLeft:"meta",OSRight:"meta",ControlLeft:"ctrl",ControlRight:"ctrl"};function y(e){return(p[e]||e).trim().toLowerCase().replace(/key|digit|numpad|arrow/,"")}function m(e,t){return void 0===t&&(t=","),e.split(t)}function v(e,t,n){void 0===t&&(t="+");var r=e.toLocaleLowerCase().split(t).map(function(e){return y(e)}),i={alt:r.includes("alt"),ctrl:r.includes("ctrl")||r.includes("control"),shift:r.includes("shift"),meta:r.includes("meta"),mod:r.includes("mod")},o=r.filter(function(e){return!d.includes(e)});return h({},i,{keys:o,description:n})}"undefined"!=typeof document&&(document.addEventListener("keydown",function(e){void 0!==e.key&&x([y(e.key),y(e.code)])}),document.addEventListener("keyup",function(e){void 0!==e.key&&w([y(e.key),y(e.code)])})),"undefined"!=typeof window&&window.addEventListener("blur",function(){g.clear()});var g=new Set;function b(e){return Array.isArray(e)}function x(e){var t=Array.isArray(e)?e:[e];g.has("meta")&&g.forEach(function(e){return!d.includes(e)&&g.delete(e.toLowerCase())}),t.forEach(function(e){return g.add(e.toLowerCase())})}function w(e){var t=Array.isArray(e)?e:[e];"meta"===e?g.clear():t.forEach(function(e){return g.delete(e.toLowerCase())})}function k(e,t){var n=e.target;void 0===t&&(t=!1);var r=n&&n.tagName;return b(t)?!!(r&&t&&t.some(function(e){return e.toLowerCase()===r.toLowerCase()})):!!(r&&t&&!0===t)}var S=function(e,t,n){void 0===n&&(n=!1);var r,i=t.alt,o=t.meta,s=t.mod,a=t.shift,l=t.ctrl,c=t.keys,u=e.key,f=e.code,h=e.ctrlKey,d=e.metaKey,p=e.shiftKey,m=e.altKey,v=y(f),x=u.toLowerCase();if(!(null!=c&&c.includes(v))&&!(null!=c&&c.includes(x))&&!["ctrl","control","unknown","meta","alt","shift","os"].includes(v))return!1;if(!n){if(!m===i&&"alt"!==x||!p===a&&"shift"!==x)return!1;if(s){if(!d&&!h)return!1}else if(!d===o&&"meta"!==x&&"os"!==x||!h===l&&"ctrl"!==x&&"control"!==x)return!1}return!!(c&&1===c.length&&(c.includes(x)||c.includes(v)))||(c?(void 0===r&&(r=","),(b(c)?c:c.split(r)).every(function(e){return g.has(e.trim().toLowerCase())})):!c)},C=(0,f.createContext)(void 0),E=(0,f.createContext)({hotkeys:[],enabledScopes:[],toggleScope:function(){},enableScope:function(){},disableScope:function(){}}),L=function(e){e.stopPropagation(),e.preventDefault(),e.stopImmediatePropagation()},j="undefined"!=typeof window?f.useLayoutEffect:f.useEffect,R=n(41170),N=n(37043),D=n(7105);let O=n.n(D)()(()=>Promise.all([n.e(8729),n.e(3558),n.e(5375),n.e(1620),n.e(9870),n.e(316),n.e(3777),n.e(7382)]).then(n.bind(n,87382)),{loadableGenerated:{webpack:()=>[87382]},ssr:!1});var A=n(6193);function P(){var e,t,n,c,h,d,p,g,D,P,H,K,Z,M,U;let[_,B]=(0,f.useState)(),I=(0,f.useRef)(),T=(0,f.useCallback)(e=>{e?B((0,R.WU)(e)):_&&B((0,R.WU)(_))},[_]);return e="cmd+shift+o",t=()=>{T()},n=[T],h=(0,f.useRef)(null),d=(0,f.useRef)(!1),p=n instanceof Array?c:n,g=b(e)?e.join(null==p?void 0:p.splitKey):e,D=n instanceof Array?n:c instanceof Array?c:void 0,P=(0,f.useCallback)(t,null!=D?D:[]),H=(0,f.useRef)(P),D?H.current=P:H.current=t,!function e(t,n){return t&&n&&"object"==typeof t&&"object"==typeof n?Object.keys(t).length===Object.keys(n).length&&Object.keys(t).reduce(function(r,i){return r&&e(t[i],n[i])},!0):t===n}((K=(0,f.useRef)(void 0)).current,p)&&(K.current=p),Z=K.current,M=(0,f.useContext)(E).enabledScopes,U=(0,f.useContext)(C),j(function(){if((null==Z?void 0:Z.enabled)!==!1&&(e=null==Z?void 0:Z.scopes,0===M.length&&e?(console.warn('A hotkey has the "scopes" option set, however no active scopes were found. If you want to use the global scopes feature, you need to wrap your app in a <HotkeysProvider>'),!0):!!(!e||M.some(function(t){return e.includes(t)})||M.includes("*")))){var e,t=function(e,t){var n;if(void 0===t&&(t=!1),!k(e,["input","textarea","select"])||k(e,null==Z?void 0:Z.enableOnFormTags)){if(null!==h.current){var r=h.current.getRootNode();if((r instanceof Document||r instanceof ShadowRoot)&&r.activeElement!==h.current&&!h.current.contains(r.activeElement)){L(e);return}}(null==(n=e.target)||!n.isContentEditable||null!=Z&&Z.enableOnContentEditable)&&m(g,null==Z?void 0:Z.splitKey).forEach(function(n){var r,i,o,s=v(n,null==Z?void 0:Z.combinationKey);if(S(e,s,null==Z?void 0:Z.ignoreModifiers)||null!=(o=s.keys)&&o.includes("*")){if(null!=Z&&null!=Z.ignoreEventWhen&&Z.ignoreEventWhen(e)||t&&d.current)return;if(("function"==typeof(r=null==Z?void 0:Z.preventDefault)&&r(e,s)||!0===r)&&e.preventDefault(),"function"==typeof(i=null==Z?void 0:Z.enabled)?!i(e,s):!0!==i&&void 0!==i){L(e);return}H.current(e,s),t||(d.current=!0)}})}},n=function(e){void 0!==e.key&&(x(y(e.code)),((null==Z?void 0:Z.keydown)===void 0&&(null==Z?void 0:Z.keyup)!==!0||null!=Z&&Z.keydown)&&t(e))},r=function(e){void 0!==e.key&&(w(y(e.code)),d.current=!1,null!=Z&&Z.keyup&&t(e,!0))},i=h.current||(null==p?void 0:p.document)||document;return i.addEventListener("keyup",r),i.addEventListener("keydown",n),U&&m(g,null==Z?void 0:Z.splitKey).forEach(function(e){return U.addHotkey(v(e,null==Z?void 0:Z.combinationKey,null==Z?void 0:Z.description))}),function(){i.removeEventListener("keyup",r),i.removeEventListener("keydown",n),U&&m(g,null==Z?void 0:Z.splitKey).forEach(function(e){return U.removeHotkey(v(e,null==Z?void 0:Z.combinationKey,null==Z?void 0:Z.description))})}}},[g,Z,M]),(0,r.jsxs)("div",{className:"bg-white pb-6",children:[(0,r.jsx)(s.Z,{className:"!m-6",items:[{title:(0,r.jsx)(u(),{href:(0,A.Y)()+"/",children:"小工具集合"})},{title:"SQL 编辑器"}]}),(0,r.jsx)("div",{className:"flex flex-col space-y-6 px-6",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between pb-4",children:[(0,r.jsx)("h2",{className:"text-lg font-medium leading-[32px]",children:"SQL"}),(0,r.jsxs)("div",{className:"flex items-center space-x-5",children:[(0,r.jsx)(a.ZP,{className:"!inline-flex items-center",icon:(0,r.jsx)(i.Z,{rev:void 0}),onClick:()=>{T()},children:"格式化"}),(0,r.jsx)(N.Z,{text:_,onSuccess:()=>{l.ZP.success("复制成功")},children:(0,r.jsx)(a.ZP,{className:"!inline-flex items-center",icon:(0,r.jsx)(o.Z,{rev:void 0}),children:"拷贝"})})]})]}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)(O,{value:_,onChange:e=>{B(e)},onMount:(e,t)=>{I.current=e,I.current.addCommand(t.KeyMod.CtrlCmd|t.KeyMod.Shift|t.KeyCode.KeyF,function(){console.log("cmd+shift+F",e.getValue()),T(e.getValue())})}})})]})})]})}},16935:function(e){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach(function(t){e.addRange(t)}),t&&t.focus()}}}},function(e){e.O(0,[427,5592,6450,4825,9208,3826,2856,2013,2888,9774,179],function(){return e(e.s=70802)}),_N_E=e.O()}]);