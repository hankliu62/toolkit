(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1307],{70112:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/other/qrcode",function(){return a(39269)}])},33114:function(e,s,a){"use strict";var l=a(14035),r=a(874),t=a.n(r),i=a(75271);class n extends i.Component{render(){let{children:e,tag:s}=this.props;return i.createElement(s,{onClick:this.onClick},e)}constructor(...e){super(...e),this.onClick=e=>{let{children:s,text:a,onSuccess:l,options:r}=this.props,n=i.Children.only(s),o="function"==typeof a?a():a,c=t()(o,r);l&&l(o,c),(null==n?void 0:n.props)&&"function"==typeof n.props.onClick&&n.props.onClick(e)}}}n.defaultProps={tag:"span",text:"",onSuccess(){l.ZP.success("已将内容复制到剪贴板")},options:{}},s.Z=Object.assign(n,{copy:t()})},95334:function(e,s,a){"use strict";var l=a(66296);let r=a.n(l)()(()=>Promise.all([a.e(1857),a.e(2720),a.e(6478),a.e(1620),a.e(7247),a.e(9142),a.e(7111)]).then(a.bind(a,7111)),{loadableGenerated:{webpack:()=>[7111]},ssr:!1});s.Z=r},39269:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return C}});var l=a(52676),r=a(99572),t=a(90880),i=a(95814),n=a(8411),o=a(73393),c=a(14035),d=a(90194),u=a(47541),x=a(72281),p=a(43598),m=a(60917),h=a(3878),f=a.n(h),v=a(68119),g=a(86139),j=a(75271),b=a(76779),N=a.n(b),w=a(62950),y=a(33114),Z=a(95334);let{Dragger:k}=o.default;function C(){let[e,s]=(0,j.useState)(),[a,o]=(0,j.useState)(),[h,b]=(0,j.useState)(),[C,P]=(0,j.useState)(),[_,S]=(0,j.useState)();function E(){S(void 0),b(void 0),P(void 0)}let L=(0,j.useCallback)(async()=>{E();try{for(let e of(await navigator.clipboard.read())){if(!e.types.includes("image/png"))throw Error("Clipboard contains non-image data.");let s=await e.getType("image/png"),a=URL.createObjectURL(s),l=await (0,g.Z)(a);b(l),P(a)}}catch(e){S(e.message),c.ZP.error(e.message)}},[]),R=(0,j.useCallback)(async e=>{E();let{status:s,originFileObj:a}=e.file;if("uploading"!==s&&console.log(e.file,e.fileList),"done"===s)try{let s=await (0,g.Z)(a);b(s);let l=new FileReader;l.onloadend=()=>{P(l.result.toString()),c.ZP.success("".concat(e.file.name," 文件上传成功。"))},l.onerror=e=>{var s,a;S(null==e?void 0:null===(a=e.target)||void 0===a?void 0:null===(s=a.error)||void 0===s?void 0:s.message),console.error(e)},l.readAsDataURL(a)}catch(e){S(e.message),console.error(e)}else"error"===s&&c.ZP.error("".concat(e.file.name," 文件上传失败。"))},[]),O=(0,j.useCallback)(async()=>{try{let s=await v.toDataURL(e,{width:300});o(a=>[...a||[],{uuid:(0,w.Z)(),content:e,image:s}])}catch(e){c.ZP.error(e.message)}},[e]),T=(0,j.useCallback)(e=>{o(s=>(s||[]).filter((s,a)=>e!==a))},[]);return(0,l.jsxs)("div",{className:"relative flex min-h-[100vh] flex-1 flex-col bg-white",children:[(0,l.jsx)(d.Z,{className:"!m-6",items:[{title:(0,l.jsx)(f(),{href:"/",children:"小工具集合"})},{title:"QRCode"}]}),(0,l.jsxs)(N(),{className:"flex-1",split:"vertical",minSize:50,maxSize:75,children:[(0,l.jsxs)("div",{className:"overflow-y-auto",children:[(0,l.jsxs)("div",{className:"flex justify-between border-b border-black/20 px-6 py-4",children:[(0,l.jsx)("h2",{className:"text-lg font-medium leading-[32px]",children:"生成二维码"}),(0,l.jsx)("div",{className:"flex items-center space-x-5",children:(0,l.jsx)(u.ZP,{className:"!inline-flex items-center",icon:(0,l.jsx)(r.Z,{rev:void 0}),onClick:O,children:"生成"})})]}),(0,l.jsx)(Z.Z,{className:"h-60 min-h-0",value:e,language:"plaintext",onChange:e=>{s(e)},options:{theme:"vs-dark"}}),(0,l.jsx)("div",{className:"m-5 space-y-5",children:null==a?void 0:a.map((e,s)=>{let{uuid:a,content:r,image:i}=e;return(0,l.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,l.jsxs)("div",{className:"flex flex-1 items-stretch gap-2",children:[(0,l.jsx)(x.Z,{className:"rounded border border-common-border",width:156,height:156,src:i,alt:r}),(0,l.jsx)("div",{className:"flex flex-1",children:(0,l.jsx)(p.Z.TextArea,{className:"h-full w-full flex-1 !bg-black/5",value:r,autoSize:!1,readOnly:!0})})]}),(0,l.jsx)("div",{className:"group p-2 text-[0px]",onClick:()=>T(s),"aria-hidden":"true",children:(0,l.jsx)(t.Z,{className:"cursor-pointer text-base group-hover:text-red-600",rev:void 0})})]},a)})})]}),(0,l.jsxs)("div",{className:"overflow-y-auto",children:[(0,l.jsxs)("div",{className:"flex justify-between border-b border-black/20 px-6 py-4",children:[(0,l.jsx)("h2",{className:"text-lg font-medium leading-[32px]",children:"解析二维码"}),(0,l.jsx)("div",{className:"flex items-center space-x-5",children:(0,l.jsx)(u.ZP,{className:"!inline-flex items-center",icon:(0,l.jsx)(r.Z,{rev:void 0}),onClick:L,children:"粘贴图片"})})]}),(0,l.jsxs)("div",{className:"m-5 space-y-5",children:[(0,l.jsxs)(k,{accept:"image/*",className:"block",name:"file",multiple:!1,onChange:R,onDrop:e=>{console.log("Dropped files",e.dataTransfer.files)},showUploadList:!1,children:[(0,l.jsx)("p",{className:"ant-upload-drag-icon",children:(0,l.jsx)(i.Z,{rev:void 0})}),(0,l.jsx)("p",{className:"ant-upload-text",children:"点击选择图片文件 或 拖进来"}),(0,l.jsx)("p",{className:"ant-upload-hint",children:"仅支持jpg、jpeg、png等图片格式，单个文件大小不超过10M"})]}),_&&(0,l.jsx)(m.Z,{message:"Error",description:_,type:"error",showIcon:!0,closable:!0,onClose:()=>S(void 0)}),C&&(0,l.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,l.jsxs)("div",{className:"flex items-stretch gap-2",children:[(0,l.jsx)(x.Z,{className:"rounded border border-common-border",width:168,height:168,src:C,alt:h}),(0,l.jsx)("div",{className:"h-[168px] flex-1 overflow-y-auto whitespace-pre-wrap break-all rounded border border-common-border bg-black/5 px-3 py-1 leading-[20px]",children:h})]}),(0,l.jsx)(y.Z,{text:h,onSuccess:()=>{c.ZP.success("复制成功")},children:(0,l.jsx)("div",{className:"group p-2 text-[0px]",children:(0,l.jsx)(n.Z,{className:"cursor-pointer text-base group-hover:text-blue-500",rev:void 0})})})]})]})]})]})]})}}},function(e){e.O(0,[8371,5959,9325,6029,7104,7113,1291,7541,4035,6874,6779,3598,7221,2888,9774,179],function(){return e(e.s=70112)}),_N_E=e.O()}]);