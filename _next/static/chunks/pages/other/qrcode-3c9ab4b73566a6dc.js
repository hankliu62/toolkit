(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1307],{29938:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/other/qrcode",function(){return a(16253)}])},37043:function(e,s,a){"use strict";var l=a(82856),r=a(874),t=a.n(r),i=a(50959);class n extends i.Component{render(){let{children:e,tag:s}=this.props;return i.createElement(s,{onClick:this.onClick},e)}constructor(...e){super(...e),this.onClick=e=>{let{children:s,text:a,onSuccess:l,options:r}=this.props,n=i.Children.only(s),o="function"==typeof a?a():a,c=t()(o,r);l&&l(o,c),(null==n?void 0:n.props)&&"function"==typeof n.props.onClick&&n.props.onClick(e)}}}n.defaultProps={tag:"span",text:"",onSuccess(){l.ZP.success("已将内容复制到剪贴板")},options:{}},s.Z=Object.assign(n,{copy:t()})},48654:function(e,s,a){"use strict";a.d(s,{p:function(){return r}});var l=a(7105);let r=a.n(l)()(()=>Promise.all([a.e(8729),a.e(3558),a.e(5375),a.e(1620),a.e(9870),a.e(9142),a.e(3595)]).then(a.bind(a,73595)),{loadableGenerated:{webpack:()=>[73595]},ssr:!1})},16253:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return P}});var l=a(11527),r=a(94594),t=a(92358),i=a(83928),n=a(10242),o=a(73545),c=a(82856),d=a(94591),u=a(12013),p=a(30343),x=a(41105),m=a(1509),h=a(71889),f=a.n(h),v=a(68119),g=a(86139),j=a(50959),b=a(76779),N=a.n(b),w=a(62950),y=a(37043),k=a(48654),Z=a(6193);let{Dragger:C}=o.default;function P(){let[e,s]=(0,j.useState)(),[a,o]=(0,j.useState)(),[h,b]=(0,j.useState)(),[P,_]=(0,j.useState)(),[S,E]=(0,j.useState)();function L(){E(void 0),b(void 0),_(void 0)}let R=(0,j.useCallback)(async()=>{L();try{for(let e of(await navigator.clipboard.read())){if(!e.types.includes("image/png"))throw Error("Clipboard contains non-image data.");let s=await e.getType("image/png"),a=URL.createObjectURL(s),l=await (0,g.Z)(a);b(l),_(a)}}catch(e){E(e.message),c.ZP.error(e.message)}},[]),O=(0,j.useCallback)(async e=>{L();let{status:s,originFileObj:a}=e.file;if("uploading"!==s&&console.log(e.file,e.fileList),"done"===s)try{let s=await (0,g.Z)(a);b(s);let l=new FileReader;l.onloadend=()=>{_(l.result.toString()),c.ZP.success("".concat(e.file.name," 文件上传成功。"))},l.onerror=e=>{var s,a;E(null==e?void 0:null===(a=e.target)||void 0===a?void 0:null===(s=a.error)||void 0===s?void 0:s.message),console.error(e)},l.readAsDataURL(a)}catch(e){E(e.message),console.error(e)}else"error"===s&&c.ZP.error("".concat(e.file.name," 文件上传失败。"))},[]),T=(0,j.useCallback)(async()=>{try{let s=await v.toDataURL(e,{width:300});o(a=>[...a||[],{uuid:(0,w.Z)(),content:e,image:s}])}catch(e){c.ZP.error(e.message)}},[e]),U=(0,j.useCallback)(e=>{o(s=>(s||[]).filter((s,a)=>e!==a))},[]);return(0,l.jsxs)("div",{className:"relative flex min-h-[100vh] flex-1 flex-col bg-white",children:[(0,l.jsx)(d.Z,{className:"!m-6",items:[{title:(0,l.jsx)(f(),{href:(0,Z.Y)()+"/",children:"小工具集合"})},{title:"QRCode"}]}),(0,l.jsxs)(N(),{className:"flex-1",split:"vertical",minSize:50,maxSize:75,children:[(0,l.jsxs)("div",{className:"overflow-y-auto",children:[(0,l.jsxs)("div",{className:"flex justify-between border-b border-black/20 px-6 py-4",children:[(0,l.jsx)("h2",{className:"text-lg font-medium leading-[32px]",children:"生成二维码"}),(0,l.jsx)("div",{className:"flex items-center space-x-5",children:(0,l.jsx)(u.ZP,{className:"!inline-flex items-center",icon:(0,l.jsx)(r.Z,{rev:void 0}),onClick:T,children:"生成"})})]}),(0,l.jsx)(k.p,{className:"h-60 min-h-0",value:e,language:"plaintext",onChange:e=>{s(e)},options:{theme:"vs-dark"}}),(0,l.jsx)("div",{className:"m-5 space-y-5",children:null==a?void 0:a.map((e,s)=>{let{uuid:a,content:r,image:i}=e;return(0,l.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,l.jsxs)("div",{className:"flex flex-1 items-stretch gap-2",children:[(0,l.jsx)(p.Z,{className:"rounded border border-common-border",width:156,height:156,src:i,alt:r}),(0,l.jsx)("div",{className:"flex flex-1",children:(0,l.jsx)(x.Z.TextArea,{className:"h-full w-full flex-1 !bg-black/5",value:r,autoSize:!1,readOnly:!0})})]}),(0,l.jsx)("div",{className:"group p-2 text-[0px]",onClick:()=>U(s),"aria-hidden":"true",children:(0,l.jsx)(t.Z,{className:"cursor-pointer text-base group-hover:text-red-600",rev:void 0})})]},a)})})]}),(0,l.jsxs)("div",{className:"overflow-y-auto",children:[(0,l.jsxs)("div",{className:"flex justify-between border-b border-black/20 px-6 py-4",children:[(0,l.jsx)("h2",{className:"text-lg font-medium leading-[32px]",children:"解析二维码"}),(0,l.jsx)("div",{className:"flex items-center space-x-5",children:(0,l.jsx)(u.ZP,{className:"!inline-flex items-center",icon:(0,l.jsx)(r.Z,{rev:void 0}),onClick:R,children:"粘贴图片"})})]}),(0,l.jsxs)("div",{className:"m-5 space-y-5",children:[(0,l.jsxs)(C,{accept:"image/*",className:"block",name:"file",multiple:!1,onChange:O,onDrop:e=>{console.log("Dropped files",e.dataTransfer.files)},showUploadList:!1,children:[(0,l.jsx)("p",{className:"ant-upload-drag-icon",children:(0,l.jsx)(i.Z,{rev:void 0})}),(0,l.jsx)("p",{className:"ant-upload-text",children:"点击选择图片文件 或 拖进来"}),(0,l.jsx)("p",{className:"ant-upload-hint",children:"仅支持jpg、jpeg、png等图片格式，单个文件大小不超过10M"})]}),S&&(0,l.jsx)(m.Z,{message:"Error",description:S,type:"error",showIcon:!0,closable:!0,onClose:()=>E(void 0)}),P&&(0,l.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,l.jsxs)("div",{className:"flex items-stretch gap-2",children:[(0,l.jsx)(p.Z,{className:"rounded border border-common-border",width:168,height:168,src:P,alt:h}),(0,l.jsx)("div",{className:"h-[168px] flex-1 overflow-y-auto whitespace-pre-wrap break-all rounded border border-common-border bg-black/5 px-3 py-1 leading-[20px]",children:h})]}),(0,l.jsx)(y.Z,{text:h,onSuccess:()=>{c.ZP.success("复制成功")},children:(0,l.jsx)("div",{className:"group p-2 text-[0px]",children:(0,l.jsx)(n.Z,{className:"cursor-pointer text-base group-hover:text-blue-500",rev:void 0})})})]})]})]})]})]})}}},function(e){e.O(0,[8371,7318,7505,8079,9208,1889,4152,2856,2013,8624,6779,1105,4676,2888,9774,179],function(){return e(e.s=29938)}),_N_E=e.O()}]);